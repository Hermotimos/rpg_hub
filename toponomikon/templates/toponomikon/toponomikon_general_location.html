{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block head_extra %}
    <link rel="stylesheet" href="{% static 'css/toponomikon.css' %}">
{% endblock head_extra %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'toponomikon:main' %}">Toponomikon</a></li>
    <li class="breadcrumb-item active">{{ page_title }}</li>
{% endblock breadcrumb %}

{% block content %}
    <br><br><br>
    <p class="toponomikon-gen-loc-img">
        <img src="{{ gen_loc.main_image.image.url }}" class="border-double
        {% if gen_loc_known_only_indirectly %}
            {{ 'img-grayscale' }}
        {% endif %}
        ">
    </p>
    <p class="text-justify p-0">{{ gen_loc.description|linebreaksbr }}</p>

    <br><br>
    <h2><b class="hover-blue" data-toggle="collapse" data-target="#specific_locations">Lokacje</b></h2>
    <br>
    <div id="specific_locations" class="collapse">
        <table class="toponomikon">
            {% for spec_loc in spec_locs %}
                <tr class="toponomikon-img">
                    <td class="unblue-black pb-4">
                        <a href="#">
                            <img src="{{ spec_loc.main_image.image.url }}" class="border-double
                            {% if spec_loc.known_only_indirectly %}
                                {{ 'img-grayscale' }}
                            {% endif %}
                            ">
                        </a>
                    </td>
                    {% if spec_loc.known_only_indirectly %}
                        <td valign="top" align="left" colspan="2" class="pl-1">
                            <h3 class="border-custom-base"><small>{{ spec_loc.name }} (znasz z opowieści)</small></h3>
                            <p class="text-justify p-0"><small>{% if spec_loc.description %}{{ spec_loc.description|truncatewords:30|linebreaksbr }}{% endif %}</small></p>
                        </td>
                    {% else %}
                        <td valign="top" align="left" colspan="2" class="pl-1">
                            <h5 class="border-custom-base">{{ spec_loc.name }}</h5>&emsp;
                            <p class="text-justify p-0"><small>{% if spec_loc.description %}{{ spec_loc.description|truncatewords:30|linebreaksbr }}{% endif %}</small></p>
                        </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </table>
        <br><br>
    </div>

    <h2><b class="hover-blue" data-toggle="collapse" data-target="#knowledge">Szczegółowe informacje o krainie</b></h2>
    <br>
    <div id="knowledge" class="collapse">
        {% for kn_packet in gen_loc.knowledge_packets.all %}
            <h5 class="pl-4" data-toggle="collapse" data-target="#id{{ skill_level.id }}_{{ kn_packet.id }}">
                <b class="hover-blue">&#10023; {{ kn_packet.title }}</b>
            </h5>
            <div id="id{{ skill_level.id }}_{{ kn_packet.id }}" class="collapse">
                <div class="pl-5">
                <p><small class="text-justify">{{ kn_packet.text }}</small></p>
                {% for picture in kn_packet.pictures.all %}
                    <p data-toggle="collapse" data-target="#id{{ kn_packet.id }}_{{ picture.id }}">{{ picture.description }}</p>
                    <div id="id{{ kn_packet.id }}_{{ picture.id }}" class="collapse">
                        <img src="{{ picture.image.url }}" class="border-double">
                        <br><br>
                    </div>
                {% endfor %}
                </div>
            </div>
        {% endfor %}

    </div>
{% endblock content %}


