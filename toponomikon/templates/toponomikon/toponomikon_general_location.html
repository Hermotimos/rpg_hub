{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block head_extra %}
    <link rel="stylesheet" href="{% static 'css/toponomikon.css' %}">
{% endblock head_extra %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'toponomikon:main' %}">Toponomikon</a></li>
    <li class="breadcrumb-item active">{{ page_title }}</li>
{% endblock breadcrumb %}

{% block content %}
    <br><br><br>
    <p class="toponomikon-gen-loc-img">
        <img src="{{ gen_loc.main_image.image.url }}" class="border-double
        {% if gen_loc_known_only_indirectly %}
            {{ 'img-grayscale' }}
        {% endif %}
        ">
    </p>
    <p><a class="pl-1" href="{% url 'toponomikon:inform' gen_loc.id '0' %}"><img src="{% static 'img/inform.png' %}" class="small-img"></a></p>
    <p class="font-italic text-justify">{{ gen_loc.description|linebreaksbr }}</p>

    <br><br>
    <h2><b class="hover-blue" data-toggle="collapse" data-target="#specific_locations">Lokacje</b></h2>
    <div id="specific_locations" class="collapse">
        {% if spec_locs %}
            <table class="toponomikon">
                {% for spec_loc in spec_locs %}
                    <tr class="toponomikon-img">
                        <td class="unblue-black pb-4">
                            <img src="{{ spec_loc.main_image.image.url }}" class="border-double
                            {% if spec_loc.known_only_indirectly %}
                                {{ 'img-grayscale' }}
                            {% endif %}
                            ">
                        </td>
                        {% if spec_loc.known_only_indirectly %}
                            <td valign="top" align="left" colspan="2" class="pl-1">
                                <h3 class="border-custom-base">
                                    <small class="text-muted">
                                        <a href="{% url 'toponomikon:specific-location' spec_loc.id %}">{{ spec_loc.name }} (znasz z opowieści)</a>
                                    </small>
                                </h3>
                                <p class="font-italic text-justify">
                                    <small class="text-muted">
                                        {% if spec_loc.description %}
                                            {{ spec_loc.description|truncatewords:30|linebreaksbr }}
                                        {% endif %}
                                    </small>
                                </p>
                            </td>
                        {% else %}
                            <td valign="top" align="left" colspan="2" class="pl-1">
                                <h5 class="border-custom-base">
                                    <a href="{% url 'toponomikon:specific-location' spec_loc.id %}">{{ spec_loc.name }}</a>
                                </h5>
                                &emsp;
                                <p class="font-italic text-justify">
                                    <small>
                                        {% if spec_loc.description %}
                                            {{ spec_loc.description|truncatewords:30|linebreaksbr }}
                                        {% endif %}
                                    </small>
                                </p>
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </table>
            <br><br>
        {% else %}
            <p class="font-18 font-italic pt-1 pl-5 text-justify">Terra incognita...</p>
        {% endif %}
    </div>
    <br>


    <h2><b class="hover-blue" data-toggle="collapse" data-target="#knowledge-packets">Szczegółowe informacje o krainie</b></h2>
    <div id="knowledge-packets" class="collapse">
        {% if gen_loc.knowledge_packets.all %}
            {% for kn_packet in gen_loc.knowledge_packets.all %}
                {% include '_knowledge_packet.html' %}
            {% endfor %}
        {% else %}
            <p class="font-18 font-italic pt-1 pl-5 text-justify">Terra incognita...</p>
        {% endif %}
    </div>

{% endblock content %}








