{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block head_extra %}
    <link rel="stylesheet" href="{% static 'css/history.css' %}">
{% endblock head_extra %}

{% block breadcrumb %}
    <li class="breadcrumb-item active">{{ page_title }}</li>
{% endblock breadcrumb %}

{% block content %}
    <br><br><br>

    <h2 class="unblue">
        <img src="{% static 'img/history_all.png' %}" class="border-double img-chapter">
        <b><a href="{% url 'history:timeline-all-events' %}" class="align-middle pt-2">Pełne Kalendarium</a></b>
    </h2>
    <small>Pełne kalendarium losów Twojej postaci oraz znanych jej wydarzeń</small><br><br>
    <br><br>

    <img src="{% static 'img/timeline_threads.png' %}" class="border-double img-chapter">
    <h3 class="align-middle pt-2" data-toggle="collapse" data-target="#threads">
        <b class="hover-blue">Wątki</b>
    </h3>
    <small>Wykaz wątków splątanych z Twoim losem</small><br><br>
    <div id="threads" class="collapse">
        <table>
            {% for row in threads|columns:3 %}
             <tr>
                 {% for thread in row %}
                 <td class="unblue">
                    &#10023;<a href="{% url 'history:timeline-thread' thread.id %}">{{ thread.name }}</a>&emsp;&emsp;
                 </td>
                 {% endfor %}
             </tr>
            {% endfor %}
        </table>
        <br><br>
    </div>
    <br>

    <img src="{% static 'img/timeline_participants.png' %}" class="border-double img-chapter">
    <h3 class="align-middle pt-2" data-toggle="collapse" data-target="#participants">
        <b class="hover-blue">Uczestnicy</b>
    </h3>
    <small>Członkowie drużyny współuczestniczący w Twoich przygodach</small><br><br>
    <div id="participants" class="collapse">
        <table>
            <tr>
                {% for p in participants %}
                    <td class="unblue-black">
                        <a href="{% url 'history:timeline-participant' p.id %}">
                            <img src="{{ p.image.url }}" class="border-double account-img-timeline">
                        </a>&emsp;&emsp;
                    </td>
                    {% if forloop.counter|divisibleby:4 %}
                        </tr><tr>
                    {% endif %}
                {% endfor %}
            </tr>
        </table>
        <br><br>
    </div>
    <br>

    <img src="{% static 'img/timeline_locations.png' %}" class="border-double img-chapter">
    <h3 class="align-middle pt-2" data-toggle="collapse" data-target="#general_locations">
        <b class="hover-blue">Lokacje</b>
    </h3>
    <small>Wykaz znanych Ci krain i lokacji występujących w Kalendarium</small><br>
    <div id="general_locations" class="collapse">
        <table>
            {% for gen_loc in gen_locs %}
                <tr>
                    <td class="unblue" colspan="4">
                        <br><h4>&#10037;<a href="{% url 'history:timeline-gen-loc' gen_loc.id %}">{{ gen_loc.name }}</a>&emsp;&emsp;</h4>
                    </td>
                </tr>
                {% for row in gen_loc.specific_locations.all|columns:4 %}
                 <tr>
                     {% for spec_loc in row %}
                     <td class="unblue">
                         &#10023; <a href="{% url 'history:timeline-spec-loc' spec_loc.id %}">{{ spec_loc.name }}</a>&emsp;
                     </td>
                     {% endfor %}
                 </tr>
                {% endfor %}
            {% endfor %}
        </table>
        <br>
    </div>
    <br><br>

    <img src="{% static 'img/timeline_years_and_seasons.png' %}" class="border-double img-chapter">
    <h3 class="align-middle pt-2" data-toggle="collapse" data-target="#years">
        <b class="hover-blue">Lata i pory roku</b>
    </h3>
    <small>Chronologia według Archonatu Nemetha Samatiana w Ebbonie</small><br><br>
    <div id="years" class="collapse">
    <table>
            {% for y in years_with_seasons_dict %}
                <tr>
                    <td class="unblue">
                        <a href="{% url 'history:timeline-date' y '0' %}">{{ y }}</a>&emsp;
                    </td>
                    <td class="unblue">
                        {% if '1' in years_with_seasons_dict|dict_lookup:y %}
                            <a href="{% url 'history:timeline-date' y '1' %}">Wiosna</a>&emsp;
                        {% endif %}
                    </td>
                    <td class="unblue">
                        {% if '2' in years_with_seasons_dict|dict_lookup:y %}
                            <a href="{% url 'history:timeline-date' y '2' %}">Lato</a>&emsp;
                        {% endif %}
                    </td>
                    <td class="unblue">
                        {% if '3' in years_with_seasons_dict|dict_lookup:y %}
                            <a href="{% url 'history:timeline-date' y '3' %}">Jesień</a>&emsp;
                        {% endif %}
                    </td>
                    <td class="unblue">
                        {% if '4' in years_with_seasons_dict|dict_lookup:y %}
                            <a href="{% url 'history:timeline-date' y '4' %}">Zima</a>&emsp;
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>
        <br><br>
    </div>
    <br>


    <img src="{% static 'img/timeline_games.png' %}" class="border-double img-chapter">
    <h3 class="align-middle pt-2" data-toggle="collapse" data-target="#games">
        <b class="hover-blue">Sesje</b>
    </h3>
    <small>Wykaz sesji mieszczących Twoje losy oraz znane Ci wydarzenia</small><br><br>
    <div id="games" class="collapse">
        <table>
            {% for row in games|columns:2 %}
             <tr>
                 {% for game in row %}
                 <td class="unblue">
                     &#10023; <a href="{% url 'history:timeline-game' game.id %}">{{ game.title|truncatechars:55 }}</a>
                 </td>
                 {% endfor %}
             </tr>
            {% endfor %}
        </table>
        <br><br>
    </div>

{% endblock content %}


